<!DOCTYPE html>
<html>

<head>
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var btn = document.getElementById("fade-btn");
        var image = document.getElementById("fade-obj");
        image.style.opacity = 1;

        function intFade() { var ss = setTimeout(fade, 100); }
        function intShow() { var vv = setTimeout(show, 100); }
        btn.addEventListener("click", intFade);

        function fade() {
            if (image.style.opacity <= 0) {
                btn.textContent = "淡入";
                btn, addEventListener("click", intShow);
                return;
            }

            image.style.opacity -= 0.05;
            console.log(image.style.opacity);
            setTimeout(fade, 100);
        }
        function show() {
            debugger;
            if (image.style.opacity >= 1) {
                btn.textContent = "淡出";
                btn, addEventListener("click", intFade);
            }
            var opacity = Number(image.style.opacity);
            console.log("before add" + opacity);
            image.style.opacity = 0.05 + opacity;
            console.log("after add" + opacity);
            setTimeout(show, 100);
        }



    </script>
</body>

</html>